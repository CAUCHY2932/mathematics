## 恢复磁盘

win+r打开cmd

chkdsk d:/f

chkdsk 磁盘符:/f


关于chkdsk这个命令的使用问题
以下文字为百度知道Ctangel总结整理，均为日常工作中所遇到的已经经过证实的方法，并非网络复制的纯理论的东西。有想转载请注明出处，谢谢合作。
相信很多网友在电脑使用过程中收到过这样的提示，任务栏右下角出来一个小提示，说你的某个文件已经损坏，请运行chkdsk修复。其实这个工具是很强大的，不过不好意思对此类问题无效。
那么遇到这个问题该如何解决和这个chkdsk到底能干什么用请看我下面阐述。
一、遇到任务栏右下角提示有文件损坏要求运行chkdsk修复的情况
比如我的机器提示C:\Documents and Settings\pifd\Local Settings\Application Data\Microsoft\Outlook\test.mxl这个文件损坏，这种情况的产生有三种可能：
1、非正常关机
2、病毒造成的破坏
3、硬盘问题（经常频繁的出现不同的文件损坏就可以判定为硬盘有坏道了）
这个问题的解决方法是直接进入那个目录，删除那个文件，比如我举的这个例子，我就直接打开我的电脑点进C:\Documents and Settings\pifd\Local Settings\Application Data\Microsoft\Outlook\这个目录里，把test.mxl删掉 就好了。可是问题来了，一般它报的文件基本上都在系统的配置文件夹里，Local Settings这一层目录是隐藏的，那么您可以选择在我的电脑的地址栏里面直接输入整个目录然后回车就可以进去了，或者我的电脑之后点击工具-文件夹选项-查看 里面有两个设置 隐藏受保护的系统文件 前面的勾去掉，在选择下面的显示所有文件，然后应用确定就可以看到隐藏文件了。
一般情况下删除完有问题的文件是不会造成软件故障的，因为它损坏的多半是备份文件或者配置文件这类随软件启动就会改写的文件。如果影响了该软件使用，那么重新安装这个软件就好了。
二、CHKDSK这个命令到底能干什么用？
这个工具其实挺强大的，可以用来修复磁盘或者卷的问题。我还遇到过机器运行特别慢，重做系统后过了一个月半个月的又特别慢的情况然后用这个命令修复好了。
这个命令的使用，前提是你的系统里这个目录下windows\system32\autochk.exe有这个文件。不然该命令无法运行。
下面举例该命令的使用方法
1、机器开机蓝屏0X000000ED
这个蓝屏代码是典型的硬盘或者卷的问题造成的蓝屏，一般到这时候安全模式也进不去了。那么这个问题怎么修复呢，这时候最古老的系统安装盘就起作用了，是原版的安装盘哦，可不是ghost的那种，把光盘放入到光驱，引导启动系统安装，到安装界面的时候选择按R进入控制台修复，进入控制台之后会停在 C：\windows\提示符下，这里我们就输入 chkdsk -r就可以开始修复错误了，中间会有一段时间运行特别慢，根本就不动，这时候一定要耐心等待千万不要以为是死机了而重新启动，修复完成后重新启动计算机，就可以进入系统了，进入之后建议先杀毒，然后重新启动测试，如果重新启动就不会再出了，那就是卷的问题，如果还出这个代码，那说明硬盘有坏道了，硬件问题，可以换硬盘，或者把初始删除分成一个小区不使用。
2、这个命令参数很多 /F /R如何选择
系统出问题会提示你用chkdsk /F 修复，但是我要告诉你，请用/R,因为/R这个参数包含/F的功能，/F修不好的时候/R或许能管用，所以不要浪费时间直接用参数R。
3、使用chkdsk修复的时候提示修复无法完成
至今我只遇到过一次，问题比较严重，就是那个机器运行慢的，这时候可以尝试不带任何参数的线运行chkdsk。让它检测一遍如果它能检测完，就可以加上参数/R 了，如果还不行，那么在不带参数运行之后再加上/F 运行一次。
4、其他
其实除了0X000000ED之外还有一些硬盘引起的蓝屏代码是可以用这个命令修复的。但并不像0X000000ED那样100%管用。
如果你没有系统盘装盘也没有关系，现在有些PE就带控制台修复，比如很古老的深山红叶，还有金手指V6启动界面上就有这项的。不过运行pe进入控制台修复的时候默认的C盘可是pe的系统盘哦，至于哪个是你的C盘自己找吧，可能是D盘也可能是E盘，在目前提示符下输入D：或者E:回车，然后输入dir能列出目录的就不是，报错的就是。
注意哦：
系统能启动的时候运行这个命令。
点击开始，运行，输入cmd。在弹出的command窗口中输入 chkdsk空格（你想要检测的盘符比如D盘就输入D:空格 -r 然后回车。会提示是否强制卸下改卷，输入y回车。很多朋友不知道这是什么意思，不敢输入y这里其实不必害怕的。如果是C盘还会提示 因为另一个过程正在使用这个卷，无法运行chkdsk..是否计划在下次系统重新启动时检查这个卷？ 这里也是要输入y的，然后重启电脑，启动系统的时候会像没正常关机一样停在一个浅蓝色界面上，这里不要按键跳过哦，让它检测，因为咱们是用的-r参数，所以时间会比每次的长一些，大家仔细观察就会发现平时不正常关机是检测修复三步，加上这个-r参数就变成了5步。


# 删除efi分区
win+r输入Diskpart
list disk

select disk 0（这里是选中需要修改的磁盘）
clean
之后新建分区即可